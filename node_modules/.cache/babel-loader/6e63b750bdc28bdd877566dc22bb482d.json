{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\darkl\\\\OneDrive\\\\Bureau\\\\formation\\\\projet 13\\\\bank\\\\src\\\\pages\\\\Login\\\\Login.js\",\n  _s = $RefreshSig$();\nimport \"./Login.css\";\nimport { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getLogin } from \"../../services/API\";\nimport { getToken } from \"../../features/Token/token\";\nimport { Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  // Use State\n  let [loginErreur, setLoginErreur] = useState(\"\");\n  let [loginStatus, setLoginStatus] = useState(0);\n  let [email, setEmail] = useState(\"\");\n  let [password, setPassword] = useState(\"\");\n  let [remember, setRemember] = useState(false);\n\n  // Use Selector\n  const token = useSelector(state => state.token.value);\n\n  // Use Effect\n  // useEffect(() => {\n  //     if(token === localStorage.getItem(\"token\")) {\n  //         ajoutToken(localStorage.getItem(\"token\"));\n  //     }\n  // });\n  useEffect(() => {\n    const remembered = localStorage.getItem(\"rememberMe\") === \"true\";\n    setRemember(remembered);\n    if (remembered) {\n      const storedToken = localStorage.getItem(\"token\");\n      if (storedToken) {\n        ajoutToken(storedToken);\n      }\n    }\n  }, []);\n\n  // Handle Submit\n  const handleSubmit = event => {\n    event.preventDefault();\n    const login = getLogin({\n      \"email\": email,\n      \"password\": password\n    });\n    login.then(obj => {\n      if (obj.status !== 400) {\n        setLoginStatus(obj.status);\n        ajoutToken(obj.token);\n      } else {\n        setLoginErreur(obj.message);\n      }\n    });\n  };\n\n  // Handle Remember\n  // const handleRemember = (event) => {\n  //     setRemember(event.target.checked);\n  // }\n  const handleRemember = event => {\n    const checked = event.target.checked;\n    setRemember(checked);\n\n    // Enregistrement de l'état \"Remember Me\" dans le localStorage\n    localStorage.setItem(\"rememberMe\", checked ? \"true\" : \"false\");\n  };\n\n  // Add the token\n  const dispatch = useDispatch();\n  const ajoutToken = token => {\n    if (remember === true) {\n      localStorage.setItem(\"token\", token);\n    }\n    dispatch(getToken(token));\n  };\n\n  // Redirection\n  if (token !== 0 || loginStatus === 200 || token === localStorage.getItem(\"token\")) return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/profil\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 94\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"bg-dark\",\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"sign-in-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fa fa-user-circle sign-in-icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"username\",\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"username\",\n            onChange: e => setEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-remember\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: \"remember-me\",\n            onChange: handleRemember\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"remember-me\",\n            children: \"Remember me\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: loginErreur\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"sign-in-button\",\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"mbqLa7JV+jnGZnqqcRD2WCwcLbI=\", false, function () {\n  return [useSelector, useDispatch];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useEffect","useSelector","useDispatch","getLogin","getToken","Navigate","Login","loginErreur","setLoginErreur","loginStatus","setLoginStatus","email","setEmail","password","setPassword","remember","setRemember","token","state","value","remembered","localStorage","getItem","storedToken","ajoutToken","handleSubmit","event","preventDefault","login","then","obj","status","message","handleRemember","checked","target","setItem","dispatch","e"],"sources":["C:/Users/darkl/OneDrive/Bureau/formation/projet 13/bank/src/pages/Login/Login.js"],"sourcesContent":["import \"./Login.css\";\nimport { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { getLogin } from \"../../services/API\";\nimport { getToken } from \"../../features/Token/token\";\nimport { Navigate } from \"react-router-dom\";\n\n\nfunction Login() {\n    // Use State\n    let [loginErreur, setLoginErreur] = useState(\"\");\n    let [loginStatus, setLoginStatus] = useState(0);\n\n    let [email, setEmail] = useState(\"\");\n    let [password, setPassword] = useState(\"\");\n    let [remember, setRemember] = useState(false);\n\n\n    // Use Selector\n    const token = useSelector((state) => state.token.value);\n\n\n    // Use Effect\n    // useEffect(() => {\n    //     if(token === localStorage.getItem(\"token\")) {\n    //         ajoutToken(localStorage.getItem(\"token\"));\n    //     }\n    // });\n    useEffect(() => {\n        const remembered = localStorage.getItem(\"rememberMe\") === \"true\";\n        setRemember(remembered);\n    \n        if (remembered) {\n            const storedToken = localStorage.getItem(\"token\");\n            if (storedToken) {\n                ajoutToken(storedToken);\n            }\n        }\n    }, []);\n\n\n    // Handle Submit\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        const login = getLogin({\"email\": email, \"password\": password});\n        login.then(obj => {\n            if(obj.status !== 400) {\n                setLoginStatus(obj.status);\n                ajoutToken(obj.token);\n            } else {\n                setLoginErreur(obj.message);\n            }\n        });\n    }\n\n\n    // Handle Remember\n    // const handleRemember = (event) => {\n    //     setRemember(event.target.checked);\n    // }\n    const handleRemember = (event) => {\n        const checked = event.target.checked;\n        setRemember(checked);\n    \n        // Enregistrement de l'état \"Remember Me\" dans le localStorage\n        localStorage.setItem(\"rememberMe\", checked ? \"true\" : \"false\");\n    }\n\n    // Add the token\n    const dispatch = useDispatch();\n    const ajoutToken = (token) => {\n        if(remember === true) {\n            localStorage.setItem(\"token\", token);\n        }\n        dispatch(getToken(token));\n    }\n\n\n    // Redirection\n    if(token !== 0 || loginStatus === 200 || token === localStorage.getItem(\"token\")) return <Navigate to=\"/profil\" /> \n\n    return (\n        <main className=\"bg-dark\">\n            <section className=\"sign-in-content\">\n                <i className=\"fa fa-user-circle sign-in-icon\"></i>\n                <h1>Sign In</h1>\n                <form onSubmit={handleSubmit}>\n                    <div className=\"input-wrapper\">\n                        <label htmlFor=\"username\">Username</label>\n                        <input type=\"text\" id=\"username\" onChange={e => setEmail(e.target.value)} />\n                    </div>\n                    <div className=\"input-wrapper\">\n                        <label htmlFor=\"password\">Password</label>\n                        <input type=\"password\" id=\"password\" onChange={e => setPassword(e.target.value)} />\n                    </div>\n                    <div className=\"input-remember\">\n                        <input type=\"checkbox\" id=\"remember-me\" onChange={handleRemember} />\n                        <label htmlFor=\"remember-me\">Remember me</label>\n                    </div>\n                    <div>\n                        {loginErreur}\n                    </div>\n                    <button className=\"sign-in-button\">Sign In</button>\n                </form>\n            </section>\n        </main>\n    );\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}